
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Indexing by label and position &#8212; Pandas from Numpy</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '0_1_to_loc_or_iloc';</script>
    <link rel="canonical" href="https://ASPP_pandas_tutorials.github.io/pandas_from_numpy/0_1_to_loc_or_iloc.html" />
    <link rel="icon" href="_static/pandas_numpy.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Attributes and Methods of Series and Data Frames" href="0_2_pandas_dataframes_attributes_methods.html" />
    <link rel="prev" title="Pandas from Numpy" href="0_0_pandas_intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/pandas_numpy.jpg" class="logo__image only-light" alt="Pandas from Numpy - Home"/>
    <script>document.write(`<img src="_static/pandas_numpy.jpg" class="logo__image only-dark" alt="Pandas from Numpy - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Pandas from Numpy</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="0_0_pandas_intro.html">Pandas from Numpy</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Indexing by label and position</a></li>
<li class="toctree-l1"><a class="reference internal" href="0_2_pandas_dataframes_attributes_methods.html">Attributes and Methods of Series and Data Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="0_3_constructing_dataframes.html">Let There Be Data : Creating Data Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="0_4_dealing_with_missing_data_in_pandas.html">Handling data that is missing</a></li>
<li class="toctree-l1"><a class="reference internal" href="0_5_filtering_data_with_pandas.html">Filtering Data Frames with Boolean Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="0_6_more_pandas_methods_strings.html">Working with strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="0_7_pandas_datetimes.html">It’s Pandas time</a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="interact/lab/index.html?path=0_1_to_loc_or_iloc.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch via JupyterLite"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="JupyterLite logo" src="_static/images/logo_jupyterlite.svg">
  </span>
<span class="btn__text-container">JupyterLite</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ASPP_pandas_tutorials/pandas_from_numpy" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ASPP_pandas_tutorials/pandas_from_numpy/edit/main/0_1_to_loc_or_iloc.Rmd" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ASPP_pandas_tutorials/pandas_from_numpy/issues/new?title=Issue%20on%20page%20%2F0_1_to_loc_or_iloc.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/0_1_to_loc_or_iloc.Rmd" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.Rmd</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Indexing by label and position</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-into-series">Indexing into Series</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">Getting started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#slicing-series-with-iloc-and-loc">Slicing Series with <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> and <code class="docutils literal notranslate"><span class="pre">.loc</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#index-labels-need-not-be-unique">Index labels need not be unique</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-default-index">The default index</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-an-index-of-integers-can-be-confusing">Why an Index of integers can be confusing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-you-should-never-use-direct-indexing-on-series">Why you should never use direct indexing on Series</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#consider-specifying-a-not-default-index-for-series-and-data-frames">Consider specifying a not-default index for Series and Data Frames</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#default-names-for-data-frame-columns">Default names for Data Frame columns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loc-and-iloc-with-data-frames"><code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> with Data Frames</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="indexing-by-label-and-position">
<h1>Indexing by label and position<a class="headerlink" href="#indexing-by-label-and-position" title="Link to this heading">#</a></h1>
<section id="indexing-into-series">
<h2>Indexing into Series<a class="headerlink" href="#indexing-into-series" title="Link to this heading">#</a></h2>
<p>From the <a class="reference internal" href="0_0_pandas_intro.html#what-is-a-series"><span class="std std-ref">What is a Series section</span></a>, remember our maxim:</p>
<blockquote>
<div><p>A <em>Series</em> is the association of:</p>
<ul class="simple">
<li><p>An array of values (<code class="docutils literal notranslate"><span class="pre">.values</span></code>)</p></li>
<li><p>A sequence of labels for each value (<code class="docutils literal notranslate"><span class="pre">.index</span></code>)</p></li>
<li><p>A name (which can be <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
</ul>
</div></blockquote>
<p>On this page, we think particularly about the Index (row labels) for Series
and Data Frames.  We also discuss the Index that Pandas creates if you do not
specify one.</p>
<p>The default Index that Pandas makes reminds us of the differences between
label indexing (using <code class="docutils literal notranslate"><span class="pre">.loc</span></code>) and position (integer) indexing (using <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>).</p>
<p>Along the way, we’ll often press you never to use direct indexing on Series,
as there is still some dangerous ambiguity as to whether you are doing label
or position indexing.</p>
<p>Because it is easy to get mixed up about position (<code class="docutils literal notranslate"><span class="pre">.iloc</span></code>) and label (<code class="docutils literal notranslate"><span class="pre">.loc</span></code>)
indexing, it is often sensible to replace Pandas’ default index with a custom
index, to avoid accidental errors when indexing.</p>
</section>
<section id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import libraries</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<p>We’ll use the <a class="reference internal" href="data/data_notes.html"><span class="doc std std-doc">fertility and Human Development Index data once
more</span></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Three letter codes for each country</span>
<span class="n">country_codes_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;AUS&#39;</span><span class="p">,</span> <span class="s1">&#39;BRA&#39;</span><span class="p">,</span> <span class="s1">&#39;CAN&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;CHN&#39;</span><span class="p">,</span> <span class="s1">&#39;DEU&#39;</span><span class="p">,</span> <span class="s1">&#39;ESP&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;FRA&#39;</span><span class="p">,</span> <span class="s1">&#39;GBR&#39;</span><span class="p">,</span> <span class="s1">&#39;IND&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;ITA&#39;</span><span class="p">,</span> <span class="s1">&#39;JPN&#39;</span><span class="p">,</span> <span class="s1">&#39;KOR&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;MEX&#39;</span><span class="p">,</span> <span class="s1">&#39;RUS&#39;</span><span class="p">,</span> <span class="s1">&#39;USA&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Human Development Index Scores for each country</span>
<span class="n">hdis_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.896</span><span class="p">,</span> <span class="mf">0.668</span><span class="p">,</span> <span class="mf">0.89</span><span class="p">,</span>
                       <span class="mf">0.586</span><span class="p">,</span> <span class="mf">0.89</span><span class="p">,</span>  <span class="mf">0.828</span><span class="p">,</span>
                       <span class="mf">0.844</span><span class="p">,</span> <span class="mf">0.863</span><span class="p">,</span> <span class="mf">0.49</span><span class="p">,</span>
                       <span class="mf">0.842</span><span class="p">,</span> <span class="mf">0.883</span><span class="p">,</span> <span class="mf">0.824</span><span class="p">,</span>
                       <span class="mf">0.709</span><span class="p">,</span> <span class="mf">0.733</span><span class="p">,</span> <span class="mf">0.894</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="slicing-series-with-iloc-and-loc">
<h2>Slicing Series with <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> and <code class="docutils literal notranslate"><span class="pre">.loc</span></code><a class="headerlink" href="#slicing-series-with-iloc-and-loc" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hdi_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">hdis_array</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">country_codes_array</span><span class="p">)</span>
<span class="n">hdi_series</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AUS    0.896
BRA    0.668
CAN    0.890
CHN    0.586
DEU    0.890
ESP    0.828
FRA    0.844
GBR    0.863
IND    0.490
ITA    0.842
JPN    0.883
KOR    0.824
MEX    0.709
RUS    0.733
USA    0.894
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>There is a fundamental difference between the behaviors of <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> and <code class="docutils literal notranslate"><span class="pre">.loc</span></code>
when slicing.</p>
<p>Standard slicing in Python uses integers to specify positions, and gives the
elements <em>starting at</em> the start position, <em>up to but not including</em> the stop
position.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_name</span> <span class="o">=</span> <span class="s1">&#39;Peter Rush&#39;</span>
<span class="c1"># From character at position 2, up to (not including) position 7.</span>
<span class="n">my_name</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;ter R&#39;
</pre></div>
</div>
</div>
</div>
<p>The same rule applies to indexing Python lists, or Numpy arrays:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># From element at position 2, up to (not including) position 7.</span>
<span class="n">country_codes_array</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;CAN&#39;, &#39;CHN&#39;, &#39;DEU&#39;, &#39;ESP&#39;, &#39;FRA&#39;], dtype=&#39;&lt;U3&#39;)
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">.iloc</span></code> is indexing by <em>position</em>, so it may not be surprising that it slices using the same rules as by-position indexing in Numpy:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># From element at position 2, up to (not including) position 7.</span>
<span class="n">hdi_series</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CAN    0.890
CHN    0.586
DEU    0.890
ESP    0.828
FRA    0.844
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Now consider slicing by <em>label</em>.  The <em>start</em> and <em>stop</em> values are no longer
positions, but labels.   The label at position 2 is <code class="docutils literal notranslate"><span class="pre">'CAN'</span></code>.  The label at
position 7 is the until-recently-European country<code class="docutils literal notranslate"><span class="pre">'GBR'</span></code>.</p>
<p>Here’s what we get from slicing using <code class="docutils literal notranslate"><span class="pre">.loc</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># From element labeled &#39;CAN&#39;, up to (including) element labeled &#39;GBR&#39;</span>
<span class="n">hdi_series</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;CAN&#39;</span><span class="p">:</span><span class="s1">&#39;GBR&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CAN    0.890
CHN    0.586
DEU    0.890
ESP    0.828
FRA    0.844
GBR    0.863
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>First notice that label indexing uses values from the Index as start and stop.  Unlike Numpy or <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> indexing, which by definition have integers as start and stop (because these are positions), <code class="docutils literal notranslate"><span class="pre">.loc</span></code> indexing start and stop values must match the values in the Index.  In this case, the Index has <code class="docutils literal notranslate"><span class="pre">str</span></code> values, so the start and stop values are also <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p>
<p>Second, notice that we got one more value from <code class="docutils literal notranslate"><span class="pre">.loc</span></code> indexing into the
Series, because <code class="docutils literal notranslate"><span class="pre">.loc</span></code> slicing — unlike <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> or Numpy indexing — <em>includes</em>
the stop value.</p>
<p>In the last cell, using <code class="docutils literal notranslate"><span class="pre">.loc</span></code>, <code class="docutils literal notranslate"><span class="pre">'GBR'</span></code> was the stop value, and we got the row corresponding to <code class="docutils literal notranslate"><span class="pre">'GBR'</span></code>.</p>
<p>This is a major difference from Numpy and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> behavior.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Stop and <code class="docutils literal notranslate"><span class="pre">.loc</span></code></strong></p>
<p>Why does <code class="docutils literal notranslate"><span class="pre">.loc</span></code> slicing return the label corresponding to the stop value, instead of going <em>up to but not including</em> the stop value, like Numpy or <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>?</p>
<p>We should say that this is absolutely the right choice.  But why?</p>
<p>Please consider reflecting before reading on.</p>
<p><a class="reference external" href="https://www.youtube.com/watch?v=XlDdrrFY4Ug">Elevator Muzak while you reflect</a></p>
<p>Please click the link above to get you into a reflective mood.</p>
<p>Back to slicing; let’s consider the problem of selecting some rows that you
want.  You can see the Index.  In your case you want all the rows from <code class="docutils literal notranslate"><span class="pre">CAN</span></code>
through <code class="docutils literal notranslate"><span class="pre">GBR</span></code>.  When the result includes the stop label, then its obvious what
to do; you do what you do above: <code class="docutils literal notranslate"><span class="pre">hdi_series.loc['CAN':'GBR']</span></code>.</p>
<p>Now consider the alternative — where slicing gives you the rows <em>up to but not
including</em> the stop value.  Your problem now becomes annoying and error-prone.
You have to look at the index, identify the last label for the row you do want
(<code class="docutils literal notranslate"><span class="pre">'GBR'</span></code>) and then go one row further, and get the label for the row <em>after</em>
the one you want (in this case <code class="docutils literal notranslate"><span class="pre">'IND'</span></code>.  In an alternative world, where
<code class="docutils literal notranslate"><span class="pre">.loc</span></code> was <em>up to and not including</em> the stop value, indexing to get rows
<code class="docutils literal notranslate"><span class="pre">'CAN'</span></code> through <code class="docutils literal notranslate"><span class="pre">'GBR'</span></code> would be <code class="docutils literal notranslate"><span class="pre">hdi_series.loc['CAN':'IND']</span></code>.  Now imagine
that for some reason I had deleted the <code class="docutils literal notranslate"><span class="pre">'IND'</span></code> row, so the following row label
is <code class="docutils literal notranslate"><span class="pre">'ITA'</span></code>. In that case, despite the fact nothing had changed in the rows I’m
interested in, I now have to write <code class="docutils literal notranslate"><span class="pre">hdi_series.loc['CAN':'ITA']</span></code> to get the
exact same rows.</p>
<p>So, yes, it’s important to remember this difference, but a little reflection
should reveal that this was still the right choice.</p>
</div>
</section>
<section id="index-labels-need-not-be-unique">
<h2>Index labels need not be unique<a class="headerlink" href="#index-labels-need-not-be-unique" title="Link to this heading">#</a></h2>
<p>We haven’t specified so far, but there is no general requirement for Pandas
Index values to be unique.  Consider the following Series:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">not_unique_labels</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;Italy&#39;</span><span class="p">,</span> <span class="s1">&#39;UK&#39;</span><span class="p">,</span> <span class="s1">&#39;Great Britain&#39;</span><span class="p">],</span>
                              <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;FRA&#39;</span><span class="p">,</span> <span class="s1">&#39;ITA&#39;</span><span class="p">,</span> <span class="s1">&#39;GBR&#39;</span><span class="p">,</span> <span class="s1">&#39;GBR&#39;</span><span class="p">])</span>
<span class="n">not_unique_labels</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>FRA           France
ITA            Italy
GBR               UK
GBR    Great Britain
dtype: object
</pre></div>
</div>
</div>
</div>
<p>Doing <code class="docutils literal notranslate"><span class="pre">.loc</span></code> indexing with a label that only matches one element gives the
corresponding value:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">not_unique_labels</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;FRA&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;France&#39;
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> matching a label with more than one row returns a subset of the Series:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">not_unique_labels</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;GBR&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>GBR               UK
GBR    Great Britain
dtype: object
</pre></div>
</div>
</div>
</div>
<p>This can lead to confusing outputs if you don’t keep track of whether the Index values uniquely identify the row.</p>
</section>
<section id="the-default-index">
<h2>The default index<a class="headerlink" href="#the-default-index" title="Link to this heading">#</a></h2>
<p>Thus far, we have specified the Index in building Series:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hdi_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">hdis_array</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">country_codes_array</span><span class="p">)</span>
<span class="n">hdi_series</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AUS    0.896
BRA    0.668
CAN    0.890
CHN    0.586
DEU    0.890
ESP    0.828
FRA    0.844
GBR    0.863
IND    0.490
ITA    0.842
JPN    0.883
KOR    0.824
MEX    0.709
RUS    0.733
USA    0.894
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Pandas allows us to build a Series without specifying an Index:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make a Series from `hdis_array`, without specifying `index`.</span>
<span class="n">hdi_series_def_index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">hdis_array</span><span class="p">)</span>
<span class="n">hdi_series_def_index</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0     0.896
1     0.668
2     0.890
3     0.586
4     0.890
5     0.828
6     0.844
7     0.863
8     0.490
9     0.842
10    0.883
11    0.824
12    0.709
13    0.733
14    0.894
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Where we did not specify an Index, Pandas has automatically generated one.  As
you can see, Pandas displays this default index as a sequence of integers,
starting at 0, and going up to the number of rows minus 1.</p>
<p>Let’s take a closer look at the default Index:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The default Pandas index</span>
<span class="n">hdi_series_def_index</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>RangeIndex(start=0, stop=15, step=1)
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> is similar to Python’s <code class="docutils literal notranslate"><span class="pre">range</span></code>; it is a space-saving container
that represents a sequence of integers from a start value up to, but not
including a stop value, with an optional step size.  Here <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>
represents the numbers 0 through 14, just as <code class="docutils literal notranslate"><span class="pre">range</span></code> can represent the numbers
0 through 14:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">zero_through_14</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">zero_through_14</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>range(0, 15)
</pre></div>
</div>
</div>
</div>
<p>As for <code class="docutils literal notranslate"><span class="pre">range</span></code> we can ask the <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> container to give up these numbers
(by iteration) into another container, such as an array or list:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Iterating through `RangeIndex` to give the represented numbers.</span>
<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">hdi_series_def_index</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Iterating through a `range` to give the represented numbers.</span>
<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">zero_through_14</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14])
</pre></div>
</div>
</div>
</div>
<p>As for <code class="docutils literal notranslate"><span class="pre">range</span></code>, one can ask for the implied elements by indexing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># View the fifth element of the RangeIndex.</span>
<span class="n">fifth_element</span> <span class="o">=</span> <span class="n">hdi_series_def_index</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="n">fifth_element</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<p>Notice that the elements from <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> are <code class="docutils literal notranslate"><span class="pre">int</span></code>s:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">fifth_element</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>int
</pre></div>
</div>
</div>
</div>
<p>For all practical purposes, you can treat this <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> as being equivalent
to the corresponding sequential Numpy integer array.</p>
<div class="exercise dropdown admonition" id="range-index">

<p class="admonition-title"><span class="caption-number">Exercise 3 </span></p>
<section id="exercise-content">
<p>Let’s make another Series where we do not specify the index:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">999</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">199</span><span class="p">,</span> <span class="mi">99</span><span class="p">])</span>
<span class="n">a_series</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    1000
1     999
2     101
3     199
4      99
dtype: int64
</pre></div>
</div>
</div>
</div>
<p>As you have seen, you will have got the default <code class="docutils literal notranslate"><span class="pre">.index</span></code>, a <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a_series</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>RangeIndex(start=0, stop=5, step=1)
</pre></div>
</div>
</div>
</div>
<p>What do you expect to see for <code class="docutils literal notranslate"><span class="pre">list(a_series)</span></code>?  Reflect, then uncomment below
and try it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># list(a_series)</span>
</pre></div>
</div>
</div>
</div>
<p>What do you expect to see for <code class="docutils literal notranslate"><span class="pre">list(a_series.index)</span></code>?  Reflect, then try it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># list(a_series.index)</span>
</pre></div>
</div>
</div>
</div>
<p>The Series method <code class="docutils literal notranslate"><span class="pre">.sort_values</span></code> returns a new Series sorted by the values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sorted_series</span> <span class="o">=</span> <span class="n">a_series</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Now what do you expect to see for <code class="docutils literal notranslate"><span class="pre">list(sorted_series)</span></code>?  Reflect, then
uncomment below and try it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># list(sorted_series)</span>
</pre></div>
</div>
</div>
</div>
<p>How about <code class="docutils literal notranslate"><span class="pre">list(sorted_series.index)</span></code>?  Reflect, try:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># list(sorted_series.index)</span>
</pre></div>
</div>
</div>
</div>
<p>What kind of thing do you think the <code class="docutils literal notranslate"><span class="pre">.index</span></code> is now?  Reflect and then:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># type(sorted_series.index)</span>
</pre></div>
</div>
</div>
</div>
<p>Can you explain the result of the last cell?</p>
</section>
</div>
<div class="solution dropdown admonition" id="0_1_to_loc_or_iloc-solution-1">

<p class="admonition-title">Solution to<a class="reference internal" href="#range-index"> Exercise 3</a></p>
<section id="solution-content">
<p><code class="docutils literal notranslate"><span class="pre">list</span></code> applied to the Series gives a list of the <code class="docutils literal notranslate"><span class="pre">.values</span></code>.  List applied to
the <code class="docutils literal notranslate"><span class="pre">.index</span></code> gives a list of the values implied by the Index.  For
a <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>, this iterates over the Index, extracting all the implied
values.</p>
<p>You should have discovered that the <code class="docutils literal notranslate"><span class="pre">sorted_series</span></code> now has an Index of
integers, and no longer has a <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>.  The question was prompting you to
reflect that Pandas can only use <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> as a space-saving device if the
integers continue to be representable as an ordered sequence with equal steps.
Otherwise it will have to rebuild an array of integers to represent the index.</p>
</section>
</div>
</section>
<section id="why-an-index-of-integers-can-be-confusing">
<h2>Why an Index of integers can be confusing<a class="headerlink" href="#why-an-index-of-integers-can-be-confusing" title="Link to this heading">#</a></h2>
<p>To recap: for our first few Series, we’ve used three-letter country codes as
the elements of an <code class="docutils literal notranslate"><span class="pre">index</span></code>. We’ve just seen what happens if we construct
a Data Frame without telling Pandas what to use as an <code class="docutils literal notranslate"><span class="pre">index</span></code> - it will create
a default <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>. <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> represents a series of integers.</p>
<p>If you did the exercise, you will have found that Pandas can use <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>
when the index is a regular sequence of integers, but must otherwise change to
having an index with an array containing integers, that are the value labels.</p>
<p>What is the advantage of using an index with values that aren’t integers
— such as strings? Below are some potential pitfalls to be aware of when using
the default index, and any other index made up of integers.</p>
<p>Let’s say we want to access the fifth element of the Series. This is at
integer location 4, because we count from 0. At the moment the numerical
labels implied by the <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> “line up” with the integer-based locations:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show the whole Series</span>
<span class="n">hdi_series_def_index</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0     0.896
1     0.668
2     0.890
3     0.586
4     0.890
5     0.828
6     0.844
7     0.863
8     0.490
9     0.842
10    0.883
11    0.824
12    0.709
13    0.733
14    0.894
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>If you somehow ask for element <code class="docutils literal notranslate"><span class="pre">4</span></code>, there is no ambiguity about which element
you mean, because the value with label <code class="docutils literal notranslate"><span class="pre">4</span></code> is also the element at integer
position <code class="docutils literal notranslate"><span class="pre">4</span></code>. Therefore, if we use integer indexing (<code class="docutils literal notranslate"><span class="pre">.iloc</span></code>) we get the same
value as if we use label based indexing (<code class="docutils literal notranslate"><span class="pre">.loc</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Indexing using integer location</span>
<span class="n">hdi_series_def_index</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.89)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Indexing using labels (from the default index)</span>
<span class="n">hdi_series_def_index</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.89)
</pre></div>
</div>
</div>
</div>
<p><strong>Because of this potential for confusion, we strongly encourage you to index
Series with <code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>, to be explicit about whether you mean label or
position indexing.</strong></p>
</section>
<section id="why-you-should-never-use-direct-indexing-on-series">
<h2>Why you should never use direct indexing on Series<a class="headerlink" href="#why-you-should-never-use-direct-indexing-on-series" title="Link to this heading">#</a></h2>
<p><a class="reference internal" href="0_0_pandas_intro.html#direct-indirect"><span class="std std-ref">Direct indexing</span></a> occurs where the indexing bracket <code class="docutils literal notranslate"><span class="pre">[</span></code> directly follows the Series value.  Conversely, indirect-indexing is indexing where the indexing bracket <code class="docutils literal notranslate"><span class="pre">[</span></code> follows <code class="docutils literal notranslate"><span class="pre">.loc</span></code> or <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>.</p>
<p>Now consider the situation, that we encourage you never to put yourself in, where you use direct indexing on a Series.  You can’t specify what type of indexing you mean with direct indexing.  Do you mean label indexing or position indexing?  Pandas will have to make assumptions, and these assumptions may well wrong for what you intend.  Did we mention, you should never use direct indexing on Series?</p>
<p>OK, let’s imagine that you decided we were wrong, and used direct indexing on the Series above, with (implied) integer Index values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Direct indexing on a Series.  You should never do this.</span>
<span class="n">hdi_series_def_index</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.89)
</pre></div>
</div>
</div>
</div>
<p>At the moment, because the positions and integer row labels match up, there is
no ambiguity as to what <code class="docutils literal notranslate"><span class="pre">4</span></code> refers to, so it may not be surprising that
<code class="docutils literal notranslate"><span class="pre">.iloc</span></code>, <code class="docutils literal notranslate"><span class="pre">.loc</span></code> and direct indexing all give the same result.</p>
<p><strong>But this will not always be the case.</strong> It is extremely common for you to do
operations on the Series — such as sorting and filtering — that will mean that
the integer labels no longer correspond to positions.</p>
<p>For instance let’s sort the data in our <code class="docutils literal notranslate"><span class="pre">hdi_series_def_index</span></code> Series in
ascending order.  To do this we will use the <code class="docutils literal notranslate"><span class="pre">.sort_values()</span></code> method. We will
cover Pandas methods in detail on <a class="reference internal" href="0_2_pandas_dataframes_attributes_methods.html"><span class="doc std std-doc">later
pages</span></a>.  The <code class="docutils literal notranslate"><span class="pre">.sort_values()</span></code> method
sorts the values of the Series in ascending order, taking the matching labels
in the index with it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sorting the *values* in ascending order</span>
<span class="n">hdi_series_def_index_sorted</span> <span class="o">=</span> <span class="n">hdi_series_def_index</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
<span class="n">hdi_series_def_index_sorted</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8     0.490
3     0.586
1     0.668
12    0.709
13    0.733
11    0.824
5     0.828
9     0.842
6     0.844
7     0.863
10    0.883
2     0.890
4     0.890
14    0.894
0     0.896
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Look at the left hand side of the display from the cell above — in particular,
look at the Index.  The numbers within the Index no longer run sequentially
from 0 to 14. This means that the integer position of each element in the
Series no longer matches up with the index label. This can be a potential
source of errors.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>The index type can change if you rearrange elements</strong></p>
<p>If you haven’t done the exercise above, please consider doing it.</p>
<p>If you have, you will have found already that the sorted Series has a new
Index, that is no longer a <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> (because the integer labels now cannot
be represented as a regular sequence of integers).  Thus
<code class="docutils literal notranslate"><span class="pre">type(hdi_series_def_index_sorted.index)</span></code> will be of type <code class="docutils literal notranslate"><span class="pre">Index</span></code>, rather than
<code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>.</p>
</div>
<p>Let’s see what happens if we try to access the fifth element of the series
using integer based indexing (<code class="docutils literal notranslate"><span class="pre">.iloc[4]</span></code>) location based indexing (<code class="docutils literal notranslate"><span class="pre">.loc[4]</span></code>)
and direct indexing (<code class="docutils literal notranslate"><span class="pre">[4]</span></code>) as we did above.</p>
<p>(Did we already say — you should never use direct indexing on Series?)</p>
<p>As you remember, when we did this on the data before sorting, all these
methods returned the same value.  Now, however:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Integer indexing on the sorted data</span>
<span class="c1"># This is the fifth element in the Series.</span>
<span class="n">hdi_series_def_index_sorted</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.733)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Label indexing on the sorted data</span>
<span class="c1"># This is the element with the label `4`.</span>
<span class="n">hdi_series_def_index_sorted</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.89)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Direct indexing on the sorted data</span>
<span class="c1"># Which is this?  Position or label?</span>
<span class="c1"># By the way - you should never use direct indexing on Series.</span>
<span class="n">hdi_series_def_index_sorted</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.89)
</pre></div>
</div>
</div>
</div>
<p>We have used the number 4 with each indexing method, yet have gotten back
different values for <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> compared to <code class="docutils literal notranslate"><span class="pre">.loc</span></code> and direct indexing.</p>
</section>
<section id="consider-specifying-a-not-default-index-for-series-and-data-frames">
<h2>Consider specifying a not-default index for Series and Data Frames<a class="headerlink" href="#consider-specifying-a-not-default-index-for-series-and-data-frames" title="Link to this heading">#</a></h2>
<p>We saw above that the default index can induce confusion between label and
position.</p>
<p>If you do avoid using direct indexing, the confusion is less — it will be
easier to remember that <code class="docutils literal notranslate"><span class="pre">.loc</span></code> is for labels and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> is for positions. But
still, with a little inattention, or some <a class="reference external" href="https://dictionary.cambridge.org/dictionary/english/tautology">sloppy
vibe-coding</a>,
it is nevertheless easy to forget which is which. This is a pitfall of using
sequential numbers as the index — as generated, for example, by <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>
— it can lead to confusing results when the position in the sequence and the
<code class="docutils literal notranslate"><span class="pre">int</span></code> label of an element of the Series do not match up.</p>
<p>Compare this to our <code class="docutils literal notranslate"><span class="pre">hdi_series</span></code> which uses the three-letter country codes as
its index:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show the `hdi_series`.</span>
<span class="n">hdi_series</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AUS    0.896
BRA    0.668
CAN    0.890
CHN    0.586
DEU    0.890
ESP    0.828
FRA    0.844
GBR    0.863
IND    0.490
ITA    0.842
JPN    0.883
KOR    0.824
MEX    0.709
RUS    0.733
USA    0.894
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Let’s get the fifth element using integer based (<code class="docutils literal notranslate"><span class="pre">.iloc</span></code>) indexing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Integer (position) indexing</span>
<span class="n">hdi_series</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.89)
</pre></div>
</div>
</div>
</div>
<p>… and let’s try to use <code class="docutils literal notranslate"><span class="pre">.loc[4]</span></code> on this Series (this will generate an
error):</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Label indexing raises a KeyError ...</span>
<span class="n">hdi_series</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="nn">File /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandas/core/indexes/base.py:3812,</span> in <span class="ni">Index.get_loc</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">3811</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">3812</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">casted_key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3813</span> <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>

<span class="nn">File pandas/_libs/index.pyx:167,</span> in <span class="ni">pandas._libs.index.IndexEngine.get_loc</span><span class="nt">()</span>

<span class="nn">File pandas/_libs/index.pyx:196,</span> in <span class="ni">pandas._libs.index.IndexEngine.get_loc</span><span class="nt">()</span>

<span class="nn">File pandas/_libs/hashtable_class_helper.pxi:7088,</span> in <span class="ni">pandas._libs.hashtable.PyObjectHashTable.get_item</span><span class="nt">()</span>

<span class="nn">File pandas/_libs/hashtable_class_helper.pxi:7096,</span> in <span class="ni">pandas._libs.hashtable.PyObjectHashTable.get_item</span><span class="nt">()</span>

<span class="ne">KeyError</span>: 4

<span class="n">The</span> <span class="n">above</span> <span class="n">exception</span> <span class="n">was</span> <span class="n">the</span> <span class="n">direct</span> <span class="n">cause</span> <span class="n">of</span> <span class="n">the</span> <span class="n">following</span> <span class="n">exception</span><span class="p">:</span>

<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">38</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Label indexing raises a KeyError ...</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">hdi_series</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandas/core/indexing.py:1191,</span> in <span class="ni">_LocationIndexer.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">1189</span> <span class="n">maybe_callable</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">apply_if_callable</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1190</span> <span class="n">maybe_callable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_deprecated_callable_usage</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">maybe_callable</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1191</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_axis</span><span class="p">(</span><span class="n">maybe_callable</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandas/core/indexing.py:1431,</span> in <span class="ni">_LocIndexer._getitem_axis</span><span class="nt">(self, key, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1429</span> <span class="c1"># fall thru to straight lookup</span>
<span class="g g-Whitespace">   </span><span class="mi">1430</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1431</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_label</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandas/core/indexing.py:1381,</span> in <span class="ni">_LocIndexer._get_label</span><span class="nt">(self, label, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1379</span> <span class="k">def</span><span class="w"> </span><span class="nf">_get_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">axis</span><span class="p">:</span> <span class="n">AxisInt</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1380</span>     <span class="c1"># GH#5567 this will fail if the label is not present in the axis.</span>
<span class="ne">-&gt; </span><span class="mi">1381</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandas/core/generic.py:4320,</span> in <span class="ni">NDFrame.xs</span><span class="nt">(self, key, axis, level, drop_level)</span>
<span class="g g-Whitespace">   </span><span class="mi">4318</span>             <span class="n">new_index</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="n">loc</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">4319</span> <span class="k">else</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">4320</span>     <span class="n">loc</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4322</span>     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">4323</span>         <span class="k">if</span> <span class="n">loc</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">bool_</span><span class="p">:</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandas/core/indexes/base.py:3819,</span> in <span class="ni">Index.get_loc</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">3814</span>     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">casted_key</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">3815</span>         <span class="nb">isinstance</span><span class="p">(</span><span class="n">casted_key</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3816</span>         <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">casted_key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3817</span>     <span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">3818</span>         <span class="k">raise</span> <span class="n">InvalidIndexError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">3819</span>     <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span>
<span class="g g-Whitespace">   </span><span class="mi">3820</span> <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">3821</span>     <span class="c1"># If we have a listlike key, _check_indexing_error will raise</span>
<span class="g g-Whitespace">   </span><span class="mi">3822</span>     <span class="c1">#  InvalidIndexError. Otherwise we fall through and re-raise</span>
<span class="g g-Whitespace">   </span><span class="mi">3823</span>     <span class="c1">#  the TypeError.</span>
<span class="g g-Whitespace">   </span><span class="mi">3824</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_check_indexing_error</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="ne">KeyError</span>: 4
</pre></div>
</div>
</div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> tells us that there is no index label <code class="docutils literal notranslate"><span class="pre">4</span></code> (which makes sense
as the index labels in this Series are three-letter country codes). To use
<code class="docutils literal notranslate"><span class="pre">.loc</span></code> with this Series, we must use the three-letter country code strings:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Label based indexing</span>
<span class="n">hdi_series</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;DEU&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.89)
</pre></div>
</div>
</div>
</div>
<p>It is much harder to get confused when using integer indices with <em>indirect
indexing</em> (<code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>).  You’ve specified what you mean (by label or by
position) using the name of the method.  However, things can get dangerously
confusing if you use an integer index and <em>direct indexing</em>.  Which is why you should not use direct indexing with Series.</p>
<p>Just to remind you, <code class="docutils literal notranslate"><span class="pre">hdi_series</span></code> has the country codes (strings like <code class="docutils literal notranslate"><span class="pre">'DEU'</span></code>)
as the index.</p>
<p>Now, consider, what would happen if we used an integer for <em>direct indexing</em>?
As in something like <code class="docutils literal notranslate"><span class="pre">hdi_series[4]</span></code>?  Because we haven’t
specified that we want to index with labels (<code class="docutils literal notranslate"><span class="pre">.loc</span></code>) or positions (<code class="docutils literal notranslate"><span class="pre">.iloc</span></code>),
Pandas has to make some decision as to how to proceed.</p>
<div class="exercise dropdown admonition" id="direct-indexing-series">

<p class="admonition-title"><span class="caption-number">Exercise 4 </span></p>
<section id="exercise-content">
<p>We assume you’ve just read the text above the exercise, where we consider what
you would expect to happen if:</p>
<ul class="simple">
<li><p>Your Series has a index of strings.</p></li>
<li><p>You use direct indexing on this Series with an integer.</p></li>
</ul>
<p>As in <code class="docutils literal notranslate"><span class="pre">hdi_series[4]</span></code>. (Don’t try it yet).</p>
<p>Pause and reflect what decision you would make in this situation, if you were
a Pandas developer, deciding what Pandas should do.  What are the options? Why
would you chose one option over another?</p>
</section>
</div>
<div class="solution dropdown admonition" id="0_1_to_loc_or_iloc-solution-3">

<p class="admonition-title">Solution to<a class="reference internal" href="#direct-indexing-series"> Exercise 4</a></p>
<section id="solution-content">
<p>Briefly you have two options we could think of as the Pandas developer.  You
could:</p>
<ul class="simple">
<li><p>Assume that the user is trying to index by label, and raise an error to say
that the label <code class="docutils literal notranslate"><span class="pre">4</span></code> is not in the index (because your index is a set of
strings).</p></li>
<li><p>Assume that the user is trying to index by position (Pandas’ current
behavior).</p></li>
<li><p>Try to persuade the user not to use direct-indexing on Series.</p></li>
</ul>
<p>However, there’s a big problem with the second option, assuming that the user
is trying to index by position.  As you have seen above, in general Pandas
treats direct indexing as by label.  So, if there are integer labels, it will,
without complaint, give you the value corresponding the integer label, not the
position.  This means that you sometimes treat direct indexing as by label
(when there is an integer index and integer value between the <code class="docutils literal notranslate"><span class="pre">[]</span></code>), and other
times as by position (when there is a non-integer index and integer value
between the <code class="docutils literal notranslate"><span class="pre">[]</span></code>).</p>
<p>As you can see, Pandas initially went for this second option, because, if you
keep track of whether your index is an integer index or not, it can be
convenient to avoid the <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> and use direct indexing for position-based
indexing (on a Series with a non-integer index).  But recently, the Pandas
developers <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/49612">have been rethinking this
decision</a>.  On option is
option 3, to disallow direct indexing on Series entirely.</p>
</section>
</div>
<p>You are about to see that direct indexing on a Series, for now, does something
frightening, which is to <em>guess</em> whether we mean to <code class="docutils literal notranslate"><span class="pre">.loc</span></code> or <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> indexing
depending on whether the index values are integers.</p>
<p>So, as you have already seen above, if the index consists of integers, and you
specify integers in your direct indexing, then Pandas will assume you mean the
values to be labels (like <code class="docutils literal notranslate"><span class="pre">.loc</span></code>).</p>
<p>If the index does not consist of integers, and you specify integers in your
direct indexing, then Pandas will currently assume you mean the values to be
positions (like <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>), but (at time of writing) give you a warning that
this will soon change.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Direct indexing</span>
<span class="n">hdi_series</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_2466/2121855053.py:2: FutureWarning: Series.__getitem__ treating keys as positions is deprecated. In a future version, integer keys will always be treated as labels (consistent with DataFrame behavior). To access a value by position, use `ser.iloc[pos]`
  hdi_series[4]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.89)
</pre></div>
</div>
</div>
</div>
<p>Using a custom non-integer index (e.g. the three-letter country codes) rather
than the default <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>, or some other integer index, has the advantage
of avoiding potential confusion between the integer location of an element,
and the index label of that element.</p>
<p>To demonstrate this, let’s sort our <code class="docutils literal notranslate"><span class="pre">hdi_series</span></code> in ascending order:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sorting the Series in ascending order</span>
<span class="n">hdi_series_sorted</span> <span class="o">=</span> <span class="n">hdi_series</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
<span class="n">hdi_series_sorted</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>IND    0.490
CHN    0.586
BRA    0.668
MEX    0.709
RUS    0.733
KOR    0.824
ESP    0.828
ITA    0.842
FRA    0.844
GBR    0.863
JPN    0.883
CAN    0.890
DEU    0.890
USA    0.894
AUS    0.896
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>The use of custom string-based labels in the index (e.g. <code class="docutils literal notranslate"><span class="pre">FRA</span></code>, <code class="docutils literal notranslate"><span class="pre">AUS</span></code> etc)
avoids confusing misalignment between the default numerical labels and integer
location.</p>
<p>We’ve said it before, we say it again here — we suggest you <em>always</em> specify
<code class="docutils literal notranslate"><span class="pre">.loc</span></code> or <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> when indexing a Series, in order not to confuse Pandas as to
whether you mean to index by label or position.   In this case <code class="docutils literal notranslate"><span class="pre">.loc</span></code> means we
have to use a string, preventing errors where we use a number and return data
we do not expect.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Label-based indexing</span>
<span class="n">hdi_series_sorted</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;DEU&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.89)
</pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Direct indexing is not currently consistent</strong></p>
<p>As an extra warning, as Pandas shifts towards more explicit choice of labels
over positions in direct indexing, there are still inconsistencies.  These
will be resolved over time, so if you want to avoid confusion, skip the rest
of this note, and remember <em>never use direct indexing on a Series</em>.</p>
<p>If you got this far, we admire your courage.  This warning is only to say that
Pandas currently treats <em>slices</em> in direct indexing differently from
individual positions or labels.  Specifically, at the moment, it will always
assume integers in slices are positions and not labels.  Try some experiments
with <code class="docutils literal notranslate"><span class="pre">hdi_series[:5]</span></code> (string label Series) and <code class="docutils literal notranslate"><span class="pre">hdi_series_def_index[:5]</span></code>
(integer label Series).</p>
<p>See <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/49612">this Pandas Github
issue</a> for discussion if
you’re interested.</p>
<p>You may be confused after trying the experiments above.  And this behavior
will surely change at some point.  Summary — always use <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> and <code class="docutils literal notranslate"><span class="pre">.loc</span></code> to
avoid ambiguity.</p>
</div>
</section>
<section id="default-names-for-data-frame-columns">
<h2>Default names for Data Frame columns<a class="headerlink" href="#default-names-for-data-frame-columns" title="Link to this heading">#</a></h2>
<p>Remember, a Data Frame is a dictionary-like collection of Series.</p>
<p>We may create Data Frames with an actual dictionary of Series, or with single
Series.</p>
<p>When we build Data Frames from Series, it becomes eminently sensible to specify
a <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute for each Series.</p>
<p>Pandas will not <em>force</em> us to do this, but it leads to some error-prone
consequences if we do not. In fact, the default <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> crops up again
here, and can create confusion in similar ways to the ones we have seen in the
last section.</p>
<p>Let us reconstruct a Series with a specified Index, but no <code class="docutils literal notranslate"><span class="pre">.name</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hdi_series</span> <span class="o">=</span>  <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">hdis_array</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">country_codes_array</span><span class="p">)</span>
<span class="n">hdi_series</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AUS    0.896
BRA    0.668
CAN    0.890
CHN    0.586
DEU    0.890
ESP    0.828
FRA    0.844
GBR    0.863
IND    0.490
ITA    0.842
JPN    0.883
KOR    0.824
MEX    0.709
RUS    0.733
USA    0.894
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Our <code class="docutils literal notranslate"><span class="pre">hdi_series</span></code> got the default value for its <code class="docutils literal notranslate"><span class="pre">.name</span></code> attribute: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hdi_series</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>Let’s pass this Series to the <code class="docutils literal notranslate"><span class="pre">pd.DataFrame()</span></code> constructor, to see the
consequence of a <code class="docutils literal notranslate"><span class="pre">.name</span></code>less Series in this context.  We will call the resulting
Data Frame <code class="docutils literal notranslate"><span class="pre">no_name_df</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># A Data Frame made of a Series with `name` attribute of None.</span>
<span class="n">no_name_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">hdi_series</span><span class="p">)</span>
<span class="n">no_name_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AUS</th>
      <td>0.896</td>
    </tr>
    <tr>
      <th>BRA</th>
      <td>0.668</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>0.890</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>0.586</td>
    </tr>
    <tr>
      <th>DEU</th>
      <td>0.890</td>
    </tr>
    <tr>
      <th>ESP</th>
      <td>0.828</td>
    </tr>
    <tr>
      <th>FRA</th>
      <td>0.844</td>
    </tr>
    <tr>
      <th>GBR</th>
      <td>0.863</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>0.490</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>0.842</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>0.883</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>0.824</td>
    </tr>
    <tr>
      <th>MEX</th>
      <td>0.709</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>0.733</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>0.894</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Ok, so in the absence of a <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute Pandas has labelled the column with a <code class="docutils literal notranslate"><span class="pre">0</span></code>. If we inspect more deeply, we find that actually Pandas, in the absence of being instructed otherwise, has created a <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>, but this time for the <code class="docutils literal notranslate"><span class="pre">columns</span></code> (e.g. the column names) of the Data Frame. If you look at the Data Frame above, you can see that the <code class="docutils literal notranslate"><span class="pre">index</span></code> attribute is the three-letter country codes. However, the <code class="docutils literal notranslate"><span class="pre">.columns</span></code> are a <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Look at the column names via the `.columns` attribute</span>
<span class="n">no_name_df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>RangeIndex(start=0, stop=1, step=1)
</pre></div>
</div>
</div>
</div>
<p>Sure enough, if we check the <code class="docutils literal notranslate"><span class="pre">type</span></code> of the fist element in this <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>
it is an <code class="docutils literal notranslate"><span class="pre">int</span></code> — we can think of it not as a column <em>name</em> but a number
standing in for a column name:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check the type of the first element in the `.columns` attribute</span>
<span class="nb">type</span><span class="p">(</span><span class="n">no_name_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>int
</pre></div>
</div>
</div>
</div>
<p>It may be obvious why this naming convention for Data Frame columns can lead
to errors for reasons of low interpretability. We typically want our column
names to be descriptive of the data in the column, to ourselves and to other
people reading our code. If we do not specify a <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute for our
Series when creating Data Frames, the default numerical column names supplied
by Pandas are hard to interpret, and it is easy to misinterpret, or to forget
what data is in that column, leading to human errors.</p>
<p>They can also lead to indexing errors, similar to those we saw in the previous
section. To demonstrate this, let’s compare the <code class="docutils literal notranslate"><span class="pre">name</span></code>less Data Frame above to
a Data Frame created from a Series with a <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
<p>Now let us create a Series with index and not-default name:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hdi_series_named</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
    <span class="n">hdis_array</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="n">country_codes_array</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Human Development Index&#39;</span><span class="p">)</span>
<span class="n">hdi_series_named</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AUS    0.896
BRA    0.668
CAN    0.890
CHN    0.586
DEU    0.890
ESP    0.828
FRA    0.844
GBR    0.863
IND    0.490
ITA    0.842
JPN    0.883
KOR    0.824
MEX    0.709
RUS    0.733
USA    0.894
Name: Human Development Index, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Our aptly named <code class="docutils literal notranslate"><span class="pre">hdi_series_named</span></code> has a <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute — (look at the
last line of the output from the cell below, the <code class="docutils literal notranslate"><span class="pre">Name:</span> <span class="pre">Human</span> <span class="pre">Development</span> <span class="pre">Index</span></code>):</p>
<p>Let’s call the <code class="docutils literal notranslate"><span class="pre">pd.DataFrame()</span></code> constructor on this Series - we’ll call the
resultant Data Frame <code class="docutils literal notranslate"><span class="pre">named_df</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a new Data Frame, with a sensible name for the column</span>
<span class="n">named_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">hdi_series_named</span><span class="p">)</span>
<span class="n">named_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Human Development Index</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AUS</th>
      <td>0.896</td>
    </tr>
    <tr>
      <th>BRA</th>
      <td>0.668</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>0.890</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>0.586</td>
    </tr>
    <tr>
      <th>DEU</th>
      <td>0.890</td>
    </tr>
    <tr>
      <th>ESP</th>
      <td>0.828</td>
    </tr>
    <tr>
      <th>FRA</th>
      <td>0.844</td>
    </tr>
    <tr>
      <th>GBR</th>
      <td>0.863</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>0.490</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>0.842</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>0.883</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>0.824</td>
    </tr>
    <tr>
      <th>MEX</th>
      <td>0.709</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>0.733</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>0.894</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We see that Pandas has automatically used the <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute as the column
name, greatly increasing the interpretability of the resulting Data Frame.</p>
<p>We can see the <code class="docutils literal notranslate"><span class="pre">name</span></code> in the <code class="docutils literal notranslate"><span class="pre">.columns</span></code> attribute of the new  <code class="docutils literal notranslate"><span class="pre">named_df</span></code> Data
Frame:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show the column names from the `named_df` Data Frame</span>
<span class="n">named_df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;Human Development Index&#39;], dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>Now, let’s try using direct indexing with each Data Frame, using the column names.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Two standard uses of direct indexing on Data Frames</strong></p>
<p>Above we said that you should never use direct indexing on Series.  However, there are two standard uses of direct indexing on Data Frames that you can use without ambiguity.</p>
<ol class="arabic simple">
<li><p><em>Direct indexing with a column name</em>, or sequence of column names.  Here the
column name (label) or sequence of column names follows the Data Frame
value and the opening <code class="docutils literal notranslate"><span class="pre">[</span></code> — as in:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">named_df['Human</span> <span class="pre">Development</span> <span class="pre">Index']</span></code> and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">named_df[['Human</span> <span class="pre">Development</span> <span class="pre">Index',</span> <span class="pre">'Some</span> <span class="pre">other</span> <span class="pre">column']</span></code></p></li>
</ul>
</li>
<li><p><em>Direct indexing with a Boolean Series</em>.  See <a class="reference internal" href="0_5_filtering_data_with_pandas.html"><span class="doc std std-doc">the filtering
page</span></a> for much more on Boolean Series and
indexing.  The Boolean Series follows the data frame value and the opening
<code class="docutils literal notranslate"><span class="pre">[</span></code>, and selects rows for which the Boolean Series has True values — as in:
<code class="docutils literal notranslate"><span class="pre">have_high_hdi</span> <span class="pre">=</span> <span class="pre">named_df['Human</span> <span class="pre">Development</span> <span class="pre">Index']</span> <span class="pre">&gt;</span> <span class="pre">0.6;</span> <span class="pre">high_df</span> <span class="pre">=</span> <span class="pre">named_df[have_high_hdi]</span></code>.</p></li>
</ol>
<p>We strongly suggest that you restrict your use of direct indexing to these
cases, and to Data Frames.  We do the same.</p>
</div>
<p>Direct indexing with a column name is very straightforward for the <code class="docutils literal notranslate"><span class="pre">named_df</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Direct indexing to retrieve a column by name (label).</span>
<span class="n">named_df</span><span class="p">[</span><span class="s1">&#39;Human Development Index&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AUS    0.896
BRA    0.668
CAN    0.890
CHN    0.586
DEU    0.890
ESP    0.828
FRA    0.844
GBR    0.863
IND    0.490
ITA    0.842
JPN    0.883
KOR    0.824
MEX    0.709
RUS    0.733
USA    0.894
Name: Human Development Index, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>What about for <code class="docutils literal notranslate"><span class="pre">no_name_df</span></code>? Well, the column name there is <code class="docutils literal notranslate"><span class="pre">0</span></code>, of <code class="docutils literal notranslate"><span class="pre">int</span></code>
type.</p>
<p>What happens if use direct indexing? We are hoping we see something like the
output of the cell above, albeit with a <code class="docutils literal notranslate"><span class="pre">0</span></code> for the <code class="docutils literal notranslate"><span class="pre">name</span></code>, rather than <code class="docutils literal notranslate"><span class="pre">Human</span> <span class="pre">Development</span> <span class="pre">Index</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Direct indexing with no `name` attribute</span>
<span class="n">no_name_df</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AUS    0.896
BRA    0.668
CAN    0.890
CHN    0.586
DEU    0.890
ESP    0.828
FRA    0.844
GBR    0.863
IND    0.490
ITA    0.842
JPN    0.883
KOR    0.824
MEX    0.709
RUS    0.733
USA    0.894
Name: 0, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Sure enough that is what we see. But the operation we have used looks very
much like <em>integer</em> indexing on a Series, which will return a single value:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Integer indexing a Series (without using `.iloc`)</span>
<span class="n">hdi_series</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_2466/374573743.py:2: FutureWarning: Series.__getitem__ treating keys as positions is deprecated. In a future version, integer keys will always be treated as labels (consistent with DataFrame behavior). To access a value by position, use `ser.iloc[pos]`
  hdi_series[0]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(0.896)
</pre></div>
</div>
</div>
</div>
<p>This can be confusing.</p>
<p>The numerical label can also be confusing if we introduce more columns,
especially if we mix in columns which do have <code class="docutils literal notranslate"><span class="pre">name</span></code> attributes that we
specify.</p>
<p>For instance, if we add in the full name of each country:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Country names array</span>
<span class="n">country_names_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;Australia&#39;</span><span class="p">,</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span> <span class="s1">&#39;Canada&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;China&#39;</span><span class="p">,</span> <span class="s1">&#39;Germany&#39;</span><span class="p">,</span> <span class="s1">&#39;Spain&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;United Kingdom&#39;</span><span class="p">,</span> <span class="s1">&#39;India&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;Italy&#39;</span><span class="p">,</span> <span class="s1">&#39;Japan&#39;</span><span class="p">,</span> <span class="s1">&#39;South Korea&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;Mexico&#39;</span><span class="p">,</span> <span class="s1">&#39;Russia&#39;</span><span class="p">,</span> <span class="s1">&#39;United States&#39;</span><span class="p">])</span>
<span class="n">country_names_array</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;Australia&#39;, &#39;Brazil&#39;, &#39;Canada&#39;, &#39;China&#39;, &#39;Germany&#39;, &#39;Spain&#39;,
       &#39;France&#39;, &#39;United Kingdom&#39;, &#39;India&#39;, &#39;Italy&#39;, &#39;Japan&#39;,
       &#39;South Korea&#39;, &#39;Mexico&#39;, &#39;Russia&#39;, &#39;United States&#39;], dtype=&#39;&lt;U14&#39;)
</pre></div>
</div>
</div>
</div>
<p>Let’s add this into the <code class="docutils literal notranslate"><span class="pre">no_name_df</span></code>, using the <code class="docutils literal notranslate"><span class="pre">name</span></code> <code class="docutils literal notranslate"><span class="pre">'Country</span> <span class="pre">Names'</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">no_name_df</span><span class="p">[</span><span class="s1">&#39;Country Names&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">country_names_array</span>
<span class="n">no_name_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>Country Names</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AUS</th>
      <td>0.896</td>
      <td>Australia</td>
    </tr>
    <tr>
      <th>BRA</th>
      <td>0.668</td>
      <td>Brazil</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>0.890</td>
      <td>Canada</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>0.586</td>
      <td>China</td>
    </tr>
    <tr>
      <th>DEU</th>
      <td>0.890</td>
      <td>Germany</td>
    </tr>
    <tr>
      <th>ESP</th>
      <td>0.828</td>
      <td>Spain</td>
    </tr>
    <tr>
      <th>FRA</th>
      <td>0.844</td>
      <td>France</td>
    </tr>
    <tr>
      <th>GBR</th>
      <td>0.863</td>
      <td>United Kingdom</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>0.490</td>
      <td>India</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>0.842</td>
      <td>Italy</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>0.883</td>
      <td>Japan</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>0.824</td>
      <td>South Korea</td>
    </tr>
    <tr>
      <th>MEX</th>
      <td>0.709</td>
      <td>Mexico</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>0.733</td>
      <td>Russia</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>0.894</td>
      <td>United States</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We now have one column that has an <code class="docutils literal notranslate"><span class="pre">int</span></code> as its column name, and another with
a string.</p>
<p>In the same way as for a numerical <code class="docutils literal notranslate"><span class="pre">index</span></code>, this situation can become
confusing if the numerical labels become misaligned with their integer
location in the <code class="docutils literal notranslate"><span class="pre">.columns</span></code> attribute.</p>
<p>For instance, we could reverse the order of the columns, by using <em>direct indexing</em> in the Data Frame to request the columns in reverse order by column label:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Re-arrange the columns</span>
<span class="c1"># Specify the order of columns we want.</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Country Names&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="c1"># Use direct indexing to select columns in given order.</span>
<span class="n">reversed_col_df</span> <span class="o">=</span> <span class="n">no_name_df</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span>
<span class="n">reversed_col_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country Names</th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AUS</th>
      <td>Australia</td>
      <td>0.896</td>
    </tr>
    <tr>
      <th>BRA</th>
      <td>Brazil</td>
      <td>0.668</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>Canada</td>
      <td>0.890</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>China</td>
      <td>0.586</td>
    </tr>
    <tr>
      <th>DEU</th>
      <td>Germany</td>
      <td>0.890</td>
    </tr>
    <tr>
      <th>ESP</th>
      <td>Spain</td>
      <td>0.828</td>
    </tr>
    <tr>
      <th>FRA</th>
      <td>France</td>
      <td>0.844</td>
    </tr>
    <tr>
      <th>GBR</th>
      <td>United Kingdom</td>
      <td>0.863</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>India</td>
      <td>0.490</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>Italy</td>
      <td>0.842</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>Japan</td>
      <td>0.883</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>South Korea</td>
      <td>0.824</td>
    </tr>
    <tr>
      <th>MEX</th>
      <td>Mexico</td>
      <td>0.709</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>Russia</td>
      <td>0.733</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>United States</td>
      <td>0.894</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We now have a column with the <code class="docutils literal notranslate"><span class="pre">name</span></code> <code class="docutils literal notranslate"><span class="pre">0</span></code> (an int) that is not at the 0-th location of the <code class="docutils literal notranslate"><span class="pre">.columns</span></code> attribute:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show the 0-th element of the `.columns` attribute</span>
<span class="n">reversed_col_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Country Names&#39;
</pre></div>
</div>
</div>
</div>
<p>We are in the precarious situation of using a <code class="docutils literal notranslate"><span class="pre">int</span></code> <code class="docutils literal notranslate"><span class="pre">0</span></code> both as a <em>label</em> and
as a <em>location</em>. In the cell above, it is a location, it the cell below it
serves as a label:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Direct index the `0` column</span>
<span class="n">reversed_col_df</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AUS    0.896
BRA    0.668
CAN    0.890
CHN    0.586
DEU    0.890
ESP    0.828
FRA    0.844
GBR    0.863
IND    0.490
ITA    0.842
JPN    0.883
KOR    0.824
MEX    0.709
RUS    0.733
USA    0.894
Name: 0, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Ideally, we would like a clear separation between integer indexes (like <code class="docutils literal notranslate"><span class="pre">0</span></code>)
and <em>column names</em>.</p>
<p>This confusing situation can be completely avoided in the case of <code class="docutils literal notranslate"><span class="pre">named_df</span></code>. Let’s add the country names to this Data Frame, that thus far only has a single column, containing the “Human Development Index” values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show the Data Frame thus far</span>
<span class="n">named_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Human Development Index</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AUS</th>
      <td>0.896</td>
    </tr>
    <tr>
      <th>BRA</th>
      <td>0.668</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>0.890</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>0.586</td>
    </tr>
    <tr>
      <th>DEU</th>
      <td>0.890</td>
    </tr>
    <tr>
      <th>ESP</th>
      <td>0.828</td>
    </tr>
    <tr>
      <th>FRA</th>
      <td>0.844</td>
    </tr>
    <tr>
      <th>GBR</th>
      <td>0.863</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>0.490</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>0.842</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>0.883</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>0.824</td>
    </tr>
    <tr>
      <th>MEX</th>
      <td>0.709</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>0.733</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>0.894</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add the country names</span>
<span class="n">named_df</span><span class="p">[</span><span class="s1">&#39;Country Names&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">country_names_array</span>
<span class="n">named_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Human Development Index</th>
      <th>Country Names</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AUS</th>
      <td>0.896</td>
      <td>Australia</td>
    </tr>
    <tr>
      <th>BRA</th>
      <td>0.668</td>
      <td>Brazil</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>0.890</td>
      <td>Canada</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>0.586</td>
      <td>China</td>
    </tr>
    <tr>
      <th>DEU</th>
      <td>0.890</td>
      <td>Germany</td>
    </tr>
    <tr>
      <th>ESP</th>
      <td>0.828</td>
      <td>Spain</td>
    </tr>
    <tr>
      <th>FRA</th>
      <td>0.844</td>
      <td>France</td>
    </tr>
    <tr>
      <th>GBR</th>
      <td>0.863</td>
      <td>United Kingdom</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>0.490</td>
      <td>India</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>0.842</td>
      <td>Italy</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>0.883</td>
      <td>Japan</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>0.824</td>
      <td>South Korea</td>
    </tr>
    <tr>
      <th>MEX</th>
      <td>0.709</td>
      <td>Mexico</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>0.733</td>
      <td>Russia</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>0.894</td>
      <td>United States</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We don’t introduce any confusion or add propensity to error by re-arranging
these columns which have sensible string names:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Re-arrange the columns</span>
<span class="n">reversed_named_df</span> <span class="o">=</span> <span class="n">named_df</span><span class="p">[[</span><span class="s1">&#39;Country Names&#39;</span><span class="p">,</span> <span class="s1">&#39;Human Development Index&#39;</span><span class="p">]]</span>
<span class="n">reversed_named_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country Names</th>
      <th>Human Development Index</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AUS</th>
      <td>Australia</td>
      <td>0.896</td>
    </tr>
    <tr>
      <th>BRA</th>
      <td>Brazil</td>
      <td>0.668</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>Canada</td>
      <td>0.890</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>China</td>
      <td>0.586</td>
    </tr>
    <tr>
      <th>DEU</th>
      <td>Germany</td>
      <td>0.890</td>
    </tr>
    <tr>
      <th>ESP</th>
      <td>Spain</td>
      <td>0.828</td>
    </tr>
    <tr>
      <th>FRA</th>
      <td>France</td>
      <td>0.844</td>
    </tr>
    <tr>
      <th>GBR</th>
      <td>United Kingdom</td>
      <td>0.863</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>India</td>
      <td>0.490</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>Italy</td>
      <td>0.842</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>Japan</td>
      <td>0.883</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>South Korea</td>
      <td>0.824</td>
    </tr>
    <tr>
      <th>MEX</th>
      <td>Mexico</td>
      <td>0.709</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>Russia</td>
      <td>0.733</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>United States</td>
      <td>0.894</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>In fact, now if we want to use integer indexing, we are forced to use <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>,
as we will otherwise get an error:</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This will not work if each column has a `name` string</span>
<span class="n">reversed_named_df</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="nn">File /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandas/core/indexes/base.py:3812,</span> in <span class="ni">Index.get_loc</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">3811</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">3812</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">casted_key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3813</span> <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>

<span class="nn">File pandas/_libs/index.pyx:167,</span> in <span class="ni">pandas._libs.index.IndexEngine.get_loc</span><span class="nt">()</span>

<span class="nn">File pandas/_libs/index.pyx:196,</span> in <span class="ni">pandas._libs.index.IndexEngine.get_loc</span><span class="nt">()</span>

<span class="nn">File pandas/_libs/hashtable_class_helper.pxi:7088,</span> in <span class="ni">pandas._libs.hashtable.PyObjectHashTable.get_item</span><span class="nt">()</span>

<span class="nn">File pandas/_libs/hashtable_class_helper.pxi:7096,</span> in <span class="ni">pandas._libs.hashtable.PyObjectHashTable.get_item</span><span class="nt">()</span>

<span class="ne">KeyError</span>: 0

<span class="n">The</span> <span class="n">above</span> <span class="n">exception</span> <span class="n">was</span> <span class="n">the</span> <span class="n">direct</span> <span class="n">cause</span> <span class="n">of</span> <span class="n">the</span> <span class="n">following</span> <span class="n">exception</span><span class="p">:</span>

<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">62</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># This will not work if each column has a `name` string</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">reversed_named_df</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandas/core/frame.py:4107,</span> in <span class="ni">DataFrame.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">4105</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">nlevels</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">4106</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_multilevel</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">4107</span> <span class="n">indexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4108</span> <span class="k">if</span> <span class="n">is_integer</span><span class="p">(</span><span class="n">indexer</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">4109</span>     <span class="n">indexer</span> <span class="o">=</span> <span class="p">[</span><span class="n">indexer</span><span class="p">]</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/pandas/core/indexes/base.py:3819,</span> in <span class="ni">Index.get_loc</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">3814</span>     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">casted_key</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">3815</span>         <span class="nb">isinstance</span><span class="p">(</span><span class="n">casted_key</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3816</span>         <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">slice</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">casted_key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3817</span>     <span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">3818</span>         <span class="k">raise</span> <span class="n">InvalidIndexError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">3819</span>     <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">err</span>
<span class="g g-Whitespace">   </span><span class="mi">3820</span> <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">3821</span>     <span class="c1"># If we have a listlike key, _check_indexing_error will raise</span>
<span class="g g-Whitespace">   </span><span class="mi">3822</span>     <span class="c1">#  InvalidIndexError. Otherwise we fall through and re-raise</span>
<span class="g g-Whitespace">   </span><span class="mi">3823</span>     <span class="c1">#  the TypeError.</span>
<span class="g g-Whitespace">   </span><span class="mi">3824</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_check_indexing_error</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="ne">KeyError</span>: 0
</pre></div>
</div>
</div>
</div>
<p>This compels us to stick to the good practice maxim <strong>use <code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">iloc</span></code>
unless there is a good reason not to!</strong>.</p>
<p>Giving every column a sensible string as a <code class="docutils literal notranslate"><span class="pre">name</span></code> is one situation where
direct indexing (e.g. in the present context using <code class="docutils literal notranslate"><span class="pre">named_df['Human</span> <span class="pre">Development</span> <span class="pre">Index']</span></code> etc.) is safe and not error prone. As we have seen,
issues can arise if we do not specify <code class="docutils literal notranslate"><span class="pre">name</span></code> attributes, and let Pandas
automatically generate numeric labels for our Data Frame columns…</p>
</section>
<section id="loc-and-iloc-with-data-frames">
<h2><code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> with Data Frames<a class="headerlink" href="#loc-and-iloc-with-data-frames" title="Link to this heading">#</a></h2>
<p>So far we have spent much time with <code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> on Series, but less
time on <code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> for Data Frames.</p>
<p>Series are like one-dimensional arrays (with and Index and a Name) - therefore
<code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> indexing into Series looks like indexing into
one-dimensional Numpy arrays.</p>
<p>A Data Frame is like a two dimensional array, so <code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> indexing
looks like indexing into two-dimensional Numpy arrays.</p>
<p>Consider the following two-dimensional Numpy array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">two_d_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">31</span><span class="p">],</span> <span class="p">[</span><span class="mi">101</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">103</span><span class="p">]])</span>
<span class="n">two_d_arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[  1,   2,   3],
       [ 11,  21,  31],
       [101, 102, 103]])
</pre></div>
</div>
</div>
</div>
<p>If we index with one expression between the indexing brackets, we select
<em>rows</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select the second row.</span>
<span class="n">two_d_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([11, 21, 31])
</pre></div>
</div>
</div>
</div>
<p>If we want to select columns, we must specify two indexing expressions between
the indexing brackets, separated by a comma:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select the second row, third column.</span>
<span class="n">two_d_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.int64(31)
</pre></div>
</div>
</div>
</div>
<p>As usual, we can use slices as indexing expressions (e.g. expressions
containing colons <code class="docutils literal notranslate"><span class="pre">:</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select first and second rows, second and third columns.</span>
<span class="n">two_d_arr</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 2,  3],
       [21, 31]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select all rows, third column.</span>
<span class="n">two_d_arr</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([  3,  31, 103])
</pre></div>
</div>
</div>
</div>
<p>Because a Data Frame has rows and columns, it corresponds to a two-dimensional
array.</p>
<p>For example, let us return to a previous Data Frame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">named_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Human Development Index</th>
      <th>Country Names</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AUS</th>
      <td>0.896</td>
      <td>Australia</td>
    </tr>
    <tr>
      <th>BRA</th>
      <td>0.668</td>
      <td>Brazil</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>0.890</td>
      <td>Canada</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>0.586</td>
      <td>China</td>
    </tr>
    <tr>
      <th>DEU</th>
      <td>0.890</td>
      <td>Germany</td>
    </tr>
    <tr>
      <th>ESP</th>
      <td>0.828</td>
      <td>Spain</td>
    </tr>
    <tr>
      <th>FRA</th>
      <td>0.844</td>
      <td>France</td>
    </tr>
    <tr>
      <th>GBR</th>
      <td>0.863</td>
      <td>United Kingdom</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>0.490</td>
      <td>India</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>0.842</td>
      <td>Italy</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>0.883</td>
      <td>Japan</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>0.824</td>
      <td>South Korea</td>
    </tr>
    <tr>
      <th>MEX</th>
      <td>0.709</td>
      <td>Mexico</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>0.733</td>
      <td>Russia</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>0.894</td>
      <td>United States</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If we ask for the Data Frame <code class="docutils literal notranslate"><span class="pre">.values</span></code>, we get a two-dimensional Numpy array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">named_df</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0.896, &#39;Australia&#39;],
       [0.668, &#39;Brazil&#39;],
       [0.89, &#39;Canada&#39;],
       [0.586, &#39;China&#39;],
       [0.89, &#39;Germany&#39;],
       [0.828, &#39;Spain&#39;],
       [0.844, &#39;France&#39;],
       [0.863, &#39;United Kingdom&#39;],
       [0.49, &#39;India&#39;],
       [0.842, &#39;Italy&#39;],
       [0.883, &#39;Japan&#39;],
       [0.824, &#39;South Korea&#39;],
       [0.709, &#39;Mexico&#39;],
       [0.733, &#39;Russia&#39;],
       [0.894, &#39;United States&#39;]], dtype=object)
</pre></div>
</div>
</div>
</div>
<p>When direct indexing with <code class="docutils literal notranslate"><span class="pre">.loc</span></code> or <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>, we can select rows with a single
indexing expression:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select row corresponding to label &#39;RUS&#39;</span>
<span class="n">named_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;RUS&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Human Development Index     0.733
Country Names              Russia
Name: RUS, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select rows from that labeled &#39;ITA&#39; to that labeled &#39;RUS&#39;.</span>
<span class="c1"># Remember, `.loc` is inclusive of the stop value.</span>
<span class="n">named_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;ITA&#39;</span><span class="p">:</span><span class="s1">&#39;RUS&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Human Development Index</th>
      <th>Country Names</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ITA</th>
      <td>0.842</td>
      <td>Italy</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>0.883</td>
      <td>Japan</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>0.824</td>
      <td>South Korea</td>
    </tr>
    <tr>
      <th>MEX</th>
      <td>0.709</td>
      <td>Mexico</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>0.733</td>
      <td>Russia</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select second row by position.</span>
<span class="n">named_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Human Development Index     0.668
Country Names              Brazil
Name: BRA, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select second through fifth row by position.</span>
<span class="c1"># As standard for Python integers indexing, this is exclusive of stop position.</span>
<span class="n">named_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Human Development Index</th>
      <th>Country Names</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>BRA</th>
      <td>0.668</td>
      <td>Brazil</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>0.890</td>
      <td>Canada</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>0.586</td>
      <td>China</td>
    </tr>
    <tr>
      <th>DEU</th>
      <td>0.890</td>
      <td>Germany</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Like the Numpy two-dimension indexing case, if we want to select columns with
<code class="docutils literal notranslate"><span class="pre">.loc</span></code> or <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>, we must give two indexing expressions, separated by
a comma:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select rows &#39;ITA&#39; through &#39;RUS&#39;, &#39;Country Names&#39; column.</span>
<span class="n">named_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;ITA&#39;</span><span class="p">:</span><span class="s1">&#39;RUS&#39;</span><span class="p">,</span> <span class="s1">&#39;Country Names&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ITA          Italy
JPN          Japan
KOR    South Korea
MEX         Mexico
RUS         Russia
Name: Country Names, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Row for &#39;RUS&#39;, all columns.</span>
<span class="n">named_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;RUS&#39;</span><span class="p">,</span> <span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Human Development Index     0.733
Country Names              Russia
Name: RUS, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select second through fifth row by position, first column by position.</span>
<span class="n">named_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>BRA    0.668
CAN    0.890
CHN    0.586
DEU    0.890
Name: Human Development Index, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Second row, all columns.</span>
<span class="n">named_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Human Development Index     0.668
Country Names              Brazil
Name: BRA, dtype: object
</pre></div>
</div>
</div>
</div>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h2>
<p>On this page we have looked at the Pandas Index, and different ways of
indexing into Pandas Series.</p>
<p>We discussed the default index that Pandas provides, of integer labels, and we
showed how to get Series values by label (<code class="docutils literal notranslate"><span class="pre">.loc</span></code>) and by position (<code class="docutils literal notranslate"><span class="pre">.iloc</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> differs from <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> and other Python indexing in that slices <em>include
their stop value</em>.</p>
<p>We pressed you to completely avoid using direct indexing on Pandas Series, because of the potent confusion that can arise between label and position indexing.</p>
<p>For best results, we should specify both an interpretable <code class="docutils literal notranslate"><span class="pre">index</span></code> and
interpretable <code class="docutils literal notranslate"><span class="pre">name</span></code> attributes for our Series, especially when they are part
of Data Frames.</p>
<p>Direct indexing into Data Frames is common and useful, in two situations:</p>
<ol class="arabic simple">
<li><p>Direct indexing using a column name or sequence of names.</p></li>
<li><p>Direct indexing using a Boolean Series (see <a class="reference internal" href="0_5_filtering_data_with_pandas.html"><span class="doc std std-doc">filtering
page</span></a>).</p></li>
</ol>
<p>We can use <code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> on Data Frames, remembering that this indexing
acts like indexing two-dimensional Numpy arrays; when selecting columns, we
first need to specify a selection for rows.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="0_0_pandas_intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Pandas from Numpy</p>
      </div>
    </a>
    <a class="right-next"
       href="0_2_pandas_dataframes_attributes_methods.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Attributes and Methods of Series and Data Frames</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-into-series">Indexing into Series</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">Getting started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#slicing-series-with-iloc-and-loc">Slicing Series with <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> and <code class="docutils literal notranslate"><span class="pre">.loc</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#index-labels-need-not-be-unique">Index labels need not be unique</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-default-index">The default index</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-an-index-of-integers-can-be-confusing">Why an Index of integers can be confusing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-you-should-never-use-direct-indexing-on-series">Why you should never use direct indexing on Series</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#consider-specifying-a-not-default-index-for-series-and-data-frames">Consider specifying a not-default index for Series and Data Frames</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#default-names-for-data-frame-columns">Default names for Data Frame columns</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loc-and-iloc-with-data-frames"><code class="docutils literal notranslate"><span class="pre">.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> with Data Frames</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Peter Rush, Matthew Brett
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>